"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6706],{6706:(v,u,i)=>{i.r(u),i.d(u,{RegisterPage:()=>E});var _=i(467),o=i(4341),s=i(6855),l=i(5788),d=i(2752),e=i(3953),g=i(3664),h=i(305);let E=(()=>{var n;class p{constructor(r,a,t){this.fb=r,this.authService=a,this.router=t,this.wait=!1}get pattern(){return l.hc.password}get email(){return this.credentials.controls.emailGroup.get("email")}get password(){return this.credentials.controls.passwordGroup.get("password")}get emailGroupOk(){const r=this.credentials.controls.emailGroup;return!(null!=r&&r.hasError("areEqual"))}get passwordGroupOk(){const r=this.credentials.controls.passwordGroup;return!(null!=r&&r.hasError("areEqual"))}ngOnInit(){const r=this.fb.group({email:new o.MJ("",[o.k0.required,o.k0.email]),emailAgain:new o.MJ("",[o.k0.required,o.k0.email])},{validators:l.g6.areEqual}),a=this.fb.group({password:new o.MJ("",[o.k0.required,o.k0.minLength(8),o.k0.maxLength(24),o.k0.pattern(this.pattern)]),passwordAgain:new o.MJ("",[o.k0.required,o.k0.minLength(8),o.k0.maxLength(24),o.k0.pattern(this.pattern)])},{validators:l.g6.areEqual});this.credentials=this.fb.group({emailGroup:r,passwordGroup:a})}obrirCondicions(){const r=this.router.serializeUrl(this.router.createUrlTree(["service-terms"]));window.open(r,"_blank")}register(){var r=this;return(0,_.A)(function*(){try{if(r.wait=!0,!r.credentials.valid){const a=new Error("Error inesperado. Puede que no se cumplan las condiciones del formulario, o se habr\xe1 dado un error en el servicio.");throw a.name=d.Q8.FormError,a}{const t=r.credentials.controls.passwordGroup;let f={email:r.credentials.controls.emailGroup.controls.email.value,password:t.controls.password.value};if(!(yield r.authService.register(f))){const m=new Error("Ha fallado la operaci\xf3n de registro. Por favor, pruebe de nuevo.");throw m.name=d.Q8.AuthenticationError,m}t.controls.password.setValue(""),t.controls.passwordAgain.setValue(""),r.router.navigateByUrl("user-profile",{replaceUrl:!0})}}finally{r.wait=!1}})()}}return(n=p).\u0275fac=function(r){return new(r||n)(e.rXU(o.ok),e.rXU(g.u),e.rXU(h.Ix))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-register"]],standalone:!0,features:[e.aNF],decls:44,vars:9,consts:[[1,"main"],[1,"content"],[1,"grid-container",3,"ngSubmit","formGroup"],["color","secondary"],["formGroupName","emailGroup"],["type","email","formControlName","email","label","E-Mail","fill","outline","errorText","email no es v\xe1lido","autocomplete","email","appAutofill","",3,"readonly"],["type","email","formControlName","emailAgain","label","Repetir e-Mail","fill","outline","helperText","Debe introducir de nuevo el email","errorText","email no es v\xe1lido","autocomplete","email","appAutofill","",3,"readonly"],["color","danger",3,"hidden"],["formGroupName","passwordGroup"],["type","password","formControlName","password","label","Contrase\xf1a","fill","outline","helperText","La contrase\xf1a debe tener may\xfasculas, min\xfasculas, n\xfameros y s\xedmbolos; puede servir una frase con un d\xedgito.","errorText","la contrase\xf1a no es v\xe1lida.","autocomplete","new-password","appAutofill","",3,"readonly"],["slot","end"],["type","password","formControlName","passwordAgain","label","Repetir contrase\xf1a","fill","outline","helperText","Debe introducir de nuevo la contrase\xf1a.","errorText","la contrase\xf1a no es v\xe1lida.","autocomplete","new-password","appAutofill","",3,"readonly"],["color","primary",3,"href"],["href","","color","secondary",3,"click"],["fill","clear","type","submit",3,"disabled"],["fill","clear","href","login"]],template:function(r,a){1&r&&(e.j41(0,"main",0)(1,"div",1)(2,"form",2),e.bIt("ngSubmit",function(){return a.register()}),e.j41(3,"ion-card",3)(4,"ion-card-header")(5,"ion-card-title"),e.EFF(6,"Registrarse"),e.k0s()(),e.j41(7,"ion-card-content")(8,"ion-list")(9,"ion-item-group",4)(10,"ion-item"),e.nrm(11,"ion-input",5),e.k0s(),e.j41(12,"ion-item"),e.nrm(13,"ion-input",6),e.k0s(),e.j41(14,"ion-item",7)(15,"span")(16,"small"),e.EFF(17,"Los emails son diferentes"),e.k0s()()()(),e.j41(18,"ion-item-group",8),e.nrm(19,"ion-item-divider"),e.j41(20,"ion-item")(21,"ion-input",9),e.nrm(22,"ion-input-password-toggle",10),e.k0s()(),e.j41(23,"ion-item")(24,"ion-input",11),e.nrm(25,"ion-input-password-toggle",10),e.k0s()(),e.j41(26,"ion-item",7)(27,"span")(28,"small"),e.EFF(29,"Las contrase\xf1as son diferentes"),e.k0s()()()(),e.j41(30,"ion-item")(31,"small")(32,"a",12),e.EFF(33,"\xbfContrase\xf1a olvidada?"),e.k0s()(),e.j41(34,"div",10)(35,"small"),e.EFF(36,"Para acceder a los servicios es necesario registrarse. Puede consultar los "),e.j41(37,"a",13),e.bIt("click",function(){return a.obrirCondicions()}),e.EFF(38,"t\xe9rminos"),e.k0s(),e.EFF(39," que accepta por el uso del servicio."),e.k0s()()()()(),e.j41(40,"ion-button",14),e.EFF(41,"Registrarse"),e.k0s(),e.j41(42,"ion-button",15),e.EFF(43,"Acceder"),e.k0s()()()()()),2&r&&(e.R7$(2),e.Y8G("formGroup",a.credentials),e.R7$(9),e.Y8G("readonly",a.wait),e.R7$(2),e.Y8G("readonly",a.wait),e.R7$(),e.Y8G("hidden",a.emailGroupOk),e.R7$(7),e.Y8G("readonly",a.wait),e.R7$(3),e.Y8G("readonly",a.wait),e.R7$(2),e.Y8G("hidden",a.passwordGroupOk),e.R7$(6),e.Y8G("href","recovery",e.B4B),e.R7$(8),e.Y8G("disabled",!a.credentials.valid||a.wait))},dependencies:[s.Dg,o.X1,o.qT,o.BC,o.cb,o.j4,o.JD,o.$R,s.jh,s.b_,s.ME,s.tN,s.I9,s.nf,s.uz,s.$w,s.Wv,s.Jm],styles:["[hidden][_ngcontent-%COMP%]{display:none!important}"]}),p})()}}]);
<ion-menu menuId="mainMenu" content-id="main-content" #menu>
  <ion-header>
    <ion-toolbar>
      <!--
      <ion-buttons slot="end">
        <ion-button icon-only (click)="menu.close()"><ion-icon name="menu"></ion-icon></ion-button>
      </ion-buttons>
      -->
      <ion-menu-button menu="mainMenu" slot="start"></ion-menu-button>
      <ion-title>Menu</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content class="ion-padding">
    <ion-list>
      <ion-list-header>
        <ion-label>Usuario</ion-label>
      </ion-list-header>
      @if (loggedIn) {
        @if (!userValidated) {
          <ion-item id="resendVerification" [routerLinkActive]="'highlight'" [routerLinkActiveOptions]="{exact:true}" class="pointer"
            (click)="resendVerification()" [routerLink]="['/resend-verification']">
            <!-- [class.highlight]="selected('resendVerification')" [class.pointer]="!selected('resendVerification')" routerDirection="root" -->
            <ion-icon slot="start" name="checkmark-outline"></ion-icon>
            <ion-label>Reenviar correo verificación email</ion-label>
          </ion-item>
        }
        <ion-item id="profile" [routerLinkActive]="'highlight'" [routerLinkActiveOptions]="{exact:true}" class="pointer"
          (click)="userProfile()" [routerLink]="['/user-profile']" >
          <!--  [class.highlight]="selected('profile')" [class.pointer]="!selected('profile')" routerDirection="root" -->
          <ion-avatar slot="start"><img src="{{ profileImgUrl ?? '/assets/person-outline.svg' }}" /></ion-avatar>
          <ion-label>Perfil</ion-label>
        </ion-item>
      }
      @if (!loggedIn || !userValidated || displayNameDefined) {
        <ion-item id="changePassword" [routerLinkActive]="'highlight'" [routerLinkActiveOptions]="{exact:true}" class="pointer"
            (click)="changePassword()" [routerLink]="['/change-password']">
            <!--  [class.highlight]="selected('changePassword')" [class.pointer]="!selected('changePassword')" routerDirection="root" -->
          <ion-icon slot="start" name="chatbubbles-outline"></ion-icon>
          <ion-label>{{ loggedIn? "Cambiar la contraseña" : "Restablecer la contraseña" }}</ion-label>
        </ion-item>
        @if (loggedIn) {
          <ion-item id="changeEmail" [routerLinkActive]="'highlight'" [routerLinkActiveOptions]="{exact:true}" class="pointer"
              (click)="changeEmail()" [routerLink]="['/change-email']">
              <!-- [class.highlight]="selected('changeEmail')" [class.pointer]="!selected('changeEmail')" routerDirection="root" -->
            <ion-icon slot="start" name="person-circle-outline"></ion-icon>
            <ion-label>Cambiar email</ion-label>
          </ion-item>
        }
      }
      <ion-item id="terms" class="pointer" (click)="serviceTerms($event)">
          <!-- [class.highlight]="selected('terms')" [class.pointer]="!selected('terms')" routerDirection="root" -->
        <ion-icon slot="start" name="contract-outline"></ion-icon>
        <ion-label>Términos del servicio</ion-label>
      </ion-item>
    </ion-list>
  </ion-content>
</ion-menu>


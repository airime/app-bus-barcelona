<ion-menu menuId="mainMenu" content-id="main-content" #menu>
  <ion-header>
    <ion-toolbar>
      <ion-menu-button menu="mainMenu" slot="end"></ion-menu-button>
      <ion-title>Menu</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-content class="ion-padding">
    <ion-accordion-group>
      <ion-accordion>
        <ion-item slot="header">
            <ion-label>Usuario</ion-label>
        </ion-item>
        <div slot="content">
          @if (loggedIn) {
            @if (!userValidated) {
              <ion-item id="resendVerification" [routerLinkActive]="'highlight'" [routerLinkActiveOptions]="{exact:true}" class="pointer"
                (click)="resendVerification()" [routerLink]="['/resend-verification']">
                <!-- [class.highlight]="selected('resendVerification')" [class.pointer]="!selected('resendVerification')" routerDirection="root" -->
                <ion-icon slot="start" name="checkmark-outline"></ion-icon>
                <ion-label>Reenviar correo verificación email</ion-label>
              </ion-item>
            }
            <ion-item id="profile" [routerLinkActive]="'highlight'" [routerLinkActiveOptions]="{exact:true}" class="pointer"
              (click)="userProfile()" [routerLink]="['/user-profile']" >
              <!--  [class.highlight]="selected('profile')" [class.pointer]="!selected('profile')" routerDirection="root" -->
              <ion-avatar slot="start"><img src="{{ profileImgUrl ?? '/assets/person-outline.svg' }}" /></ion-avatar>
              <ion-label>Perfil</ion-label>
            </ion-item>
          }
          @if (!loggedIn || !userValidated || displayNameDefined) {
            <ion-item id="changePassword" [routerLinkActive]="'highlight'" [routerLinkActiveOptions]="{exact:true}" class="pointer"
                (click)="changePassword()" [routerLink]="['/change-password']">
                <!--  [class.highlight]="selected('changePassword')" [class.pointer]="!selected('changePassword')" routerDirection="root" -->
              <ion-icon slot="start" name="chatbubbles-outline"></ion-icon>
              <ion-label>{{ loggedIn? "Cambiar la contraseña" : "Restablecer la contraseña" }}</ion-label>
            </ion-item>
            @if (loggedIn) {
              <ion-item id="changeEmail" [routerLinkActive]="'highlight'" [routerLinkActiveOptions]="{exact:true}" class="pointer"
                  (click)="changeEmail()" [routerLink]="['/change-email']">
                  <!-- [class.highlight]="selected('changeEmail')" [class.pointer]="!selected('changeEmail')" routerDirection="root" -->
                <ion-icon slot="start" name="person-circle-outline"></ion-icon>
                <ion-label>Cambiar email</ion-label>
              </ion-item>
            }
          }
          <ion-item id="terms" class="pointer" (click)="serviceTerms($event)">
              <!-- [class.highlight]="selected('terms')" [class.pointer]="!selected('terms')" routerDirection="root" -->
            <ion-icon slot="start" name="contract-outline"></ion-icon>
            <ion-label>Términos del servicio</ion-label>
          </ion-item>
        </div>
      </ion-accordion>
      @if (loggedIn && userValidated && showServices) {
        <ion-accordion>
          <div slot="header">
            <ion-item id="serveis" [routerLinkActive]="'highlight'" [routerLinkActiveOptions]="{exact:false}" class="pointer"
              (click)="showMap()" [routerLink]="['/private/home/']" routerDirection="root" >
              <!--  [class.highlight]="selected('map')" [class.pointer]="!selected('map')" routerDirection="root" -->
              <ion-icon slot="start" name="map-outline"></ion-icon>
              <ion-label>Serveis</ion-label>
            </ion-item>
          </div>
        </ion-accordion>
      }
    </ion-accordion-group>
  </ion-content>
</ion-menu>

